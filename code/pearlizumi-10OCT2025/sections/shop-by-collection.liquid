{% liquid
  assign mb_class = 'mb-0 md:mb-8.5'
  if section.settings.enable_bottom_margin 
    assign mb_class = 'mb-20 md:mb-40'
  endif
%}
{%- if section.settings.image_1 != blank -%}
  <div id="section-{{ number }}" class="container max-w-full md:max-w-680 lg:max-w-920 xl:max-w-1200 {{ mb_class }}">
    {%- if section.settings.title != blank -%}      
      <div class="mb-6 lg:mb-0 flex items-end justify-between lg:block px-6 md:px-0">
        <h2 class="text-h3-m lg:text-h2 uppercase mb-0 lg:mb-8">{{- section.settings.title -}}</h2>
      </div>
    {%- endif -%}
    <div class="grid grid-cols-1 md:grid-cols-3 gap-y-0 gap-x-4 lg:gap-x-6">
      {%- for i in (1..3) -%}
        {%- capture image -%}image_{{i}}{%- endcapture -%}
        {%- capture cta_title -%}cta_title_{{i}}{%- endcapture -%}
        {%- capture url -%}url_{{i}}{%- endcapture -%}
        {%- if section.settings[image] != blank and section.settings[cta_title] != blank and section.settings[url] != blank -%}
          <a href="{{section.settings[url]}}" class="relative block w-full h-0 pt-144percent group transition-all duration-300 ease-in-out overflow-hidden">
            <img class="lazy absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full object-cover" data-src="{{ section.settings[image] | img_url: '400x', scale: 2 }}" alt="{{- section.settings[image].alt -}}">

            <div class="absolute left-0 bottom-0 w-full bg-dark-stone-overlay md:hover:bg-dark-stone-overlay-hover px-6 xl:px-8 py-10 md:py-6 xl:py-12 text-white text-h4-m lg:text-h4 tracking-0.8 md:tracking-1 font-medium flex items-center justify-between">
              <span class="w-adjust">{{- section.settings[cta_title] -}}</span>
              <span class="w-7.5 h-7.5 md:w-8 md:h-8 rounded-full block opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-all duration-300 ease-in-out text-black">
                <span class="w-full h-full flex items-center justify-center opacity-70 md:opacity-70 md:hover:opacity-90 bg-faint-cloud rounded-full">
                  {% render 'svg-arrow-right', width: '16.8px', height: '11.52px' %}
                </span>
              </span>

              <div class="bg-lush absolute bottom-full -left-full group-hover:left-0 w-full h-2 transition-all duration-300 ease-in-out hidden md:block"></div>
            </div>
          </a>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "Shop by Collection",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Shop By Collection"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Image 1",
      "info": "Recommended size: 800x1152"
    },
    {
      "type": "text",
      "id": "cta_title_1",
      "label": "CTA title 1"
    },
    {
      "id": "url_1",
      "type": "url",
      "label": "Link 1"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Image 2",
      "info": "Recommended size: 800x1152"
    },
    {
      "type": "text",
      "id": "cta_title_2",
      "label": "CTA title 2"
    },
    {
      "id": "url_2",
      "type": "url",
      "label": "Link 2"
    },
    {
      "type": "image_picker",
      "id": "image_3",
      "label": "Image 3",
      "info": "Recommended size: 800x1152"
    },
    {
      "type": "text",
      "id": "cta_title_3",
      "label": "CTA title 3"
    },
    {
      "id": "url_3",
      "type": "url",
      "label": "Link 3"
    },
    {
      "type": "checkbox",
      "id": "enable_bottom_margin",
      "label": "Enable Bottom Margin",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Shop by Collection"
    }
  ]
}
{% endschema %}
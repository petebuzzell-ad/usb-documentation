/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/scripts/templates/collection.js":
/*!*********************************************!*\
  !*** ./src/scripts/templates/collection.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst collection = {\n  loadMore(url) {\n    fetch(url, {\n      credentials: 'same-origin',\n      method: 'GET'\n    }).then(function (response) {\n      response.text().then(function (content) {\n        const grid = document.querySelector('.collection-grid');\n        let el = document.createElement('html');\n        el.innerHTML = content;\n        let innerHTML = el.querySelector('.collection-grid').innerHTML;\n        document.querySelector('.collection-grid-load').remove();\n        grid.innerHTML = grid.innerHTML + innerHTML;\n      });\n    });\n  },\n  activateDropdown(e) {\n    e.stopPropagation();\n    if (this.classList.contains('active')) {\n      this.classList.remove('active');\n    } else {\n      this.classList.add('active');\n    }\n    const dropdowns = document.querySelectorAll('.collection-filter--item, .collection-sort--item');\n    const _this = this;\n    dropdowns.forEach(el => {\n      if (el != _this) el.classList.remove('active');\n    });\n  },\n  filterDropdowns() {\n    const dropdowns = document.querySelectorAll('.collection-filter--item, .collection-sort--item');\n    const clearFilterBtns = document.querySelectorAll('.collection-filter--clear');\n    dropdowns.forEach(el => {\n      el.addEventListener('click', this.activateDropdown);\n    });\n    document.addEventListener(\"click\", function () {\n      dropdowns.forEach(el => {\n        if (el.classList.contains('active')) {\n          el.classList.remove('active');\n        }\n      });\n    });\n    if (document.querySelector('.collection-filter--header')) {\n      document.querySelector('.collection-filter--header').addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        if (window.innerWidth < 1024) {\n          const overlay = document.getElementById('mobile-nav-overlay');\n          const body = document.querySelector('body');\n          const filterGroup = document.querySelector('.collection-filter--group');\n          document.getElementById(`mobile-nav-main`).classList.remove('active');\n          window.eHS.navMobile.navOpen = false;\n          filterGroup.classList.add('active');\n          overlay.classList.add('active');\n          overlay.classList.remove('hidden');\n          body.classList.add('noscroll');\n        }\n      });\n    }\n    if (document.querySelector('.collection-filter--group .collection-filter--group__close')) {\n      document.querySelector('.collection-filter--group .collection-filter--group__close').addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        const overlay = document.getElementById('mobile-nav-overlay');\n        const body = document.querySelector('body');\n        const filterGroup = document.querySelector('.collection-filter--group');\n        const dropdowns = document.querySelectorAll('.collection-filter--item');\n        dropdowns.forEach(el => {\n          el.classList.remove('active');\n        });\n        document.getElementById(`mobile-nav-main`).classList.remove('active');\n        window.eHS.navMobile.navOpen = false;\n        filterGroup.classList.remove('active');\n        overlay.classList.remove('active');\n        overlay.classList.add('hidden');\n        body.classList.remove('noscroll');\n      });\n    }\n    clearFilterBtns.forEach(el => {\n      el.addEventListener('click', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        const wrapper = this.closest('.collection-filter--item');\n        const boxes = wrapper.querySelectorAll('input:checked');\n        boxes.forEach(box => {\n          box.checked = false;\n        });\n      });\n    });\n  },\n  rediectBySortOption(sort_option) {\n    const urlParams = location.search.replace('?', '').split('&');\n    let newParams = [];\n    let sortBy = sort_option;\n    urlParams.forEach(param => {\n      if (param.indexOf('sort_by') > -1) {\n        newParams.push('sort_by=' + sortBy);\n      } else {\n        if (param != '') newParams.push(param);\n      }\n    });\n    if (location.search.indexOf('sort_by') == -1) {\n      newParams.push('sort_by=' + sortBy);\n    }\n    if (newParams.length > 0) location.href = location.pathname + '?' + newParams.join('&');\n  },\n  sortDropdown() {\n    const options = document.querySelectorAll('.collection-sort--wrapper .sort-dropdown [data-value]');\n    const dropdown = document.querySelector('.collection-sort--wrapper .sort-dropdown');\n    const applyBtn = document.getElementById('collection-sort--btn');\n    const radioBtns = document.querySelectorAll('.sort-dropdown .custom-radio');\n    const _this = this;\n    options.forEach(el => {\n      el.addEventListener('click', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        if (window.innerWidth >= 1024) {\n          _this.rediectBySortOption(this.dataset.value);\n        }\n      });\n    });\n    radioBtns.forEach(el => {\n      el.addEventListener('click', function (e) {\n        this.querySelector('input').checked = true;\n      });\n    });\n    if (dropdown) {\n      dropdown.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n    }\n    if (applyBtn) {\n      applyBtn.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        let sortBy = dropdown.querySelector('input:checked').value;\n        if (sortBy) {\n          _this.rediectBySortOption(sortBy);\n        }\n      });\n    }\n    if (document.querySelector('.collection-sort--header')) {\n      document.querySelector('.collection-sort--header').addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        if (window.innerWidth < 1024) {\n          const overlay = document.getElementById('mobile-nav-overlay');\n          const body = document.querySelector('body');\n          const sortWrapper = document.querySelector('.collection-sort--wrapper');\n          document.getElementById(`mobile-nav-main`).classList.remove('active');\n          window.eHS.navMobile.navOpen = false;\n          sortWrapper.classList.add('active');\n          sortWrapper.querySelector('.collection-sort--item').classList.add('active');\n          overlay.classList.add('active');\n          overlay.classList.remove('hidden');\n          body.classList.add('noscroll');\n        }\n      });\n    }\n    if (document.querySelector('.collection-sort--wrapper .collection-filter--group__close')) {\n      document.querySelector('.collection-sort--wrapper .collection-filter--group__close').addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        const overlay = document.getElementById('mobile-nav-overlay');\n        const body = document.querySelector('body');\n        const sortWrapper = document.querySelector('.collection-sort--wrapper');\n        const dropdowns = document.querySelectorAll('.collection-sort--item');\n        dropdowns.forEach(el => {\n          el.classList.remove('active');\n        });\n        document.getElementById(`mobile-nav-main`).classList.remove('active');\n        window.eHS.navMobile.navOpen = false;\n        sortWrapper.classList.remove('active');\n        overlay.classList.remove('active');\n        overlay.classList.add('hidden');\n        body.classList.remove('noscroll');\n      });\n    }\n  },\n  loadSecondaryImages() {\n    // This will be used for the SearchSpring gender filter. If the collection gender is set then this will be ignored.\n    if (location.hash.indexOf('gender:') > -1) {\n      const hashArray = location.hash.split(\"/filter:\");\n      let gender = null;\n      for (var i = 0; i < hashArray.length; i++) {\n        let hash = hashArray[i];\n        if (hash.indexOf('gender:') > -1) {\n          gender = hash.replace('gender:', '').toLowerCase();\n          break;\n        }\n      }\n      if (gender != null && gender != '' && ['men', 'women'].indexOf(gender) > -1) {\n        const images = document.querySelectorAll('.product-item__primary-image[data-gendered=false], .product-item__secondary-image[data-gendered=false]');\n        images.forEach(image => {\n          const generImage = image.dataset[gender + 'Img'];\n          if (generImage) {\n            image.src = generImage;\n            image.dataset.gendered = true;\n          }\n        });\n      }\n    }\n  },\n  closeVideoModal() {\n    const body = document.querySelector('body');\n    const overlay = document.getElementById('siteOverlay');\n    const videoModal = document.querySelector('.cta-video-modal');\n    const video = document.querySelector('.cta-video-modal__video');\n    body.classList.remove('noscroll');\n    if (videoModal) {\n      videoModal.classList.add('hidden');\n      videoModal.classList.remove('block');\n    }\n    if (overlay) {\n      overlay.classList.remove('active');\n      overlay.classList.add('hidden');\n    }\n    if (video) {\n      video.pause();\n    }\n  },\n  initCtaTiles() {\n    const playBtns = document.querySelectorAll('.plp-cta-item .play-video-btn, .plp-cta-item .watch-video-btn');\n    const body = document.querySelector('body');\n    const videoModal = document.querySelector('.cta-video-modal');\n    const videoModalInner = document.querySelector('.cta-video-modal--inner');\n    const overlay = document.getElementById('siteOverlay');\n    const _this = this;\n    playBtns.forEach(btn => {\n      btn.addEventListener(\"click\", function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (videoModal.querySelector('.cta-video-modal__video')) {\n          videoModal.querySelector('.cta-video-modal__video').remove();\n        }\n        const video_url = this.dataset.video;\n        if (video_url) {\n          const videoHtml = '<video class=\"cta-video-modal__video absolute top-0 left-0 w-full h-full bg-black\" width=\"100%\" controls><source src=\"' + video_url + '\" type=\"video/mp4\">Your browser does not support the video tag.</video>';\n          videoModalInner.innerHTML = videoModalInner.innerHTML + videoHtml;\n          body.classList.add('noscroll');\n          videoModal.classList.remove('hidden');\n          videoModal.classList.add('block');\n          overlay.classList.add('active');\n          overlay.classList.remove('hidden');\n          document.querySelector('.cta-video-modal__video').addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n          });\n        }\n      });\n    });\n    document.addEventListener(\"click\", function () {\n      _this.closeVideoModal();\n    });\n  },\n  init() {\n    this.filterDropdowns();\n    this.sortDropdown();\n    this.loadSecondaryImages();\n    this.initCtaTiles();\n  }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (collection);\n\n//# sourceURL=webpack://ehouse-all-natural/./src/scripts/templates/collection.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/scripts/templates/collection.js"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;
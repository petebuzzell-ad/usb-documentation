{% assign mb_class = 'mb-0' %}{% if section.settings.enable_bottom_margin %}{% assign mb_class = 'mb-20 md:mb-40' %}{% endif %}
  <div data-section-id="{{ section.id }}" data-section-type="image-gallery-slider" id="section-{{ number }}" class="relative overflow-hidden {{ mb_class }}">
    {% if section.settings.title != blank or section.settings.text != blank %}
      <div class="w-full px-6">
        <div class="max-w-full md:max-w-1200 mx-auto">
          {% if section.settings.title != blank %}
            <h2 class="mb-6 md:mb-8 uppercase overflow-hidden">
              {%- if underline == true -%}
                <span class="relative">
                  <span class="z-1 relative">{{ section.settings.title }}</span>
                  <span class="absolute left-0 bottom-0 bg-sand z-0 w-underline-mobile h-4 lg:w-underline-desktop lg:h-5.5"></span>
                </span>
              {%- else -%}
                {{ section.settings.title }}
              {%- endif -%}
            </h2>
          {% endif %}
          {% if section.settings.text != blank %}
            <p class="mb-10">{{ section.settings.text }}</p>
          {% endif %}
        </div>
      </div>
    {% endif %}
    {% assign slider_nav = "" %}
  
    <div class="clp-slider relative">
      <div class="image-gallery-slider md:w-full overflow-x-visible">
        <div class="glide__track" data-glide-el="track">
          <div class="glide__slides w-full">
            {% for i in (1..5) %}
              {% assign key_image = 'image_' | append: i %}
              {% assign key_image_m = 'image_m_' | append: i %}
              {% unless section.settings[key_image] == blank and section.settings[key_image_m] == blank %}
                <div class="glide__slide w-full">
                  {% if section.settings[key_image] != blank %}
                    <div class="image-gallery-slider__image relative">
                      <img class="lazy absolute inset-0 w-full h-full object-cover" data-src="{{ section.settings[key_image] | img_url: 'master' }}" alt="{{ section.settings[key_image].alt | escape }}" />
                      <picture>
                        <source media="(min-width:768px)" data-srcset="{{ section.settings[key_image] | img_url: 'master' }}">
                        <source media="(max-width:767px)" data-srcset="{% if section.settings[key_image_m] != blank %}{{ section.settings[key_image_m] | img_url: 'master' }}{% endif %}">
                        <img class="lazy absolute inset-0 w-full h-full object-cover" data-src="{{ section.settings[key_image] | img_url: 'master' }}" alt="{{ section.settings[key_image].alt | escape }}" />
                      </picture>
                    </div>
                  {% endif %}
                </div>
                {% capture slider_nav %}
                  {{ slider_nav }}
                  <div class="glide__bullet mx-0.5 w-2 h-2 md:w-3 md:h-3 p-0.5 rounded-circle cursor-pointer" data-glide-dir="={{ forloop.index0 }}"><span class="block w-full h-full rounded-circle"></span></div>
                {% endcapture %}
              {% endunless %}
            {% endfor %}
          </div>
        </div>
        <div class="glide__bullets absolute bottom-4 md:bottom-6 w-full flex justify-center" data-glide-el="controls[nav]">
          {{ slider_nav }}
        </div>
        <div class="glide__arrows hidden md:flex absolute w-full top-1/2 transform -translate-y-1/2 justify-between px-18" data-glide-el="controls">
          <a href="#" class="glide__arrow glide__arrow--left button-slider-nav w-12.5 h-12.5 p-0 rounded-circle flex items-center justify-center" data-glide-dir="<">{% include 'svg-arrow-left' %}</a>
          <a href="#" class="glide__arrow glide__arrow--right button-slider-nav w-12.5 h-12.5 p-0 rounded-circle flex items-center justify-center" data-glide-dir=">">{% include 'svg-arrow-right' %} </a>
        </div>
      </div>
    </div>
  </div>

  {% schema %}
  {
    "name": "Image Gallery Slider",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Title"
      },
      {
        "type": "textarea",
        "id": "text",
        "label": "Text"
      },
      {
        "type": "image_picker",
        "id": "image_1",
        "label": "Image 1"
      },
      {
        "type": "image_picker",
        "id": "image_m_1",
        "label": "Image 1 (Mobile)"
      },
      {
        "type": "image_picker",
        "id": "image_2",
        "label": "Image 2"
      },
      {
        "type": "image_picker",
        "id": "image_m_2",
        "label": "Image 2 (Mobile)"
      },
      {
        "type": "image_picker",
        "id": "image_3",
        "label": "Image 3"
      },
      {
        "type": "image_picker",
        "id": "image_m_3",
        "label": "Image 3 (Mobile)"
      },
      {
        "type": "image_picker",
        "id": "image_4",
        "label": "Image 4"
      },
      {
        "type": "image_picker",
        "id": "image_m_4",
        "label": "Image 4 (Mobile)"
      },
      {
        "type": "image_picker",
        "id": "image_5",
        "label": "Image 5"
      },
      {
        "type": "image_picker",
        "id": "image_m_5",
        "label": "Image 5 (Mobile)"
      },
      {
        "type": "checkbox",
        "id": "enable_bottom_margin",
        "label": "Enable Bottom Margin",
        "default": true
      }
    ],
    "presets": [
      {
        "name": "Image Gallery Slider"
      }
    ]
  }
  {% endschema %}